<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>page</title>

<style>
    body {
        background: black;
        color: #e6e6e6;
        margin: 0;
        font-family: "Courier New", monospace;
        overflow: hidden;
    }

    #container {
        width: 100%;
        height: 100vh;
        position: relative;
        padding: 40px;
        box-sizing: border-box;
    }

    #silhouette {
        position: absolute;
        left: calc(50% - 150px);
        top: 8%;
        transform: translateX(-50%);
        white-space: pre;
        letter-spacing: 0.08em;
        font-size: 10px;
        opacity: 0;
        transition: opacity 0.5s ease, color 0.3s ease;
        cursor: default;
        user-select: none;
        color: #e6e6e6;
    }

    /* silhouette becomes clickable only after all questions are used */
    #silhouette.active {
        opacity: 1;
        cursor: pointer;
    }

    #silhouette.active:hover {
        color: #c7ffd6;
    }

    #answer-box {
        position: absolute;
        left: 60%;
        top: 28%;
        font-size: 1.15rem;
        white-space: pre-wrap;
        transition: opacity 0.4s ease;
    }

    #questions {
        position: absolute;
        left: 32%;
        bottom: 16%;
        font-size: 1.1rem;
        line-height: 1.9;
        opacity: 0;
        transition: opacity 0.4s ease;
    }

    .caret {
        display: inline-block;
        width: 0.55ch;
        animation: blink 1s steps(1) infinite;
        opacity: 0.9;
    }

    .question {
        cursor: pointer;
        transition: opacity 0.25s ease, background-color 0.15s ease, color 0.15s ease;
        padding: 2px 6px;
        border-radius: 2px;
    }

    .question.used {
        opacity: 0.25;
        pointer-events: none;
        background: rgba(255,255,255,0.04);
    }

    .question:hover {color: #0f0;
    }

    .question.dimmed {
        background: rgba(0,0,0,0.6);
        color: #888;
    }

    @keyframes blink {
        0% { opacity: 1; }
        50% { opacity: 0; }
        100% { opacity: 1; }
    }
</style>

</head>
<body>

<div id="container">

<pre id="silhouette">






                                              .#%#%#:
                                             #*-+#%@@#
                                           .@=.   -*#%*-
                                           #*-:.   .=*#+
                                           @++      +=**-
                                          -@#:       .##+
                                          *@@=. ..    *%*
                                          *@@%-..    -%#+
                                          *#@@*=-..  @%%#.
                                          *##%*..   :@#*%-
                                         =**%#*.    -@**#+.
                                       ###%@@%=.  . -%##%#++
                                     -#@@%@@@%+.    .+%%#*+*:.
                                    ==*%@@@@@@+      =%%%#+=
                                   .-+#%@@@@@@+      :%#%@#*
                                   :=+#%@@@@@@@@@@@@@@**%@%%=
                                   :=*#%@@@@%@@@@@@@@%*%%@%*.
                                   .+*#%@@@@%@@@@@@@@@%#%%#=
                                    ++=*%@@@@@@@@@@@@@@*++%=
                                   .=:.==@@@@@@@@@@@@@@@%#*=
                                   .-. .:%@@@@@@@@@@@@@@@@ =
                                   .:. . #@@@@@@@@@@@@@@@@ =
                                   :   . #@@@@@@@@@@@@@@@@ =
                                   .   = @@@@@@@@@@@@@@@@@ -
                                  ..   %:@@@@@@@@@@@@@@@@@*-:.
                                  :.  . @@@@@@@@@@@@@@@@@@@-=.
                                  :.  -*@@@@@@@@@@@@@@@@@@@#+.
</pre>

<div id="answer-box"></div>

<div id="questions">
    <div class="question" data-answer="hi.">-> hi.</div>
    <div class="question" data-answer="that's kind.">-> you look pretty today.</div>
    <div class="question" data-answer="i'm not sure thanks.">-> you're interesting and kind.</div>
    <div class="question" data-answer="oh um thats nice.">-> i like the way you smile.</div>
</div>

</div>

<script>
const questions = document.querySelectorAll(".question");
const answerBox = document.getElementById("answer-box");
const silhouette = document.getElementById("silhouette");
const questionsBox = document.getElementById("questions");

let usedCount = 0;
let typingInterval = null;
let typingSoundInterval = null;
let audioCtx = null;

function ensureAudio() {
    if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }
    if (audioCtx.state === "suspended") {
        audioCtx.resume().catch(() => {});
    }
}

function playClickSound() {
    ensureAudio();
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    const filter = audioCtx.createBiquadFilter();
    osc.type = "square";
    osc.frequency.value = 420 + Math.random() * 80; // lower pitch for a softer click
    gain.gain.value = 0.04; // quieter
    filter.type = "lowpass";
    filter.frequency.value = 1400; // muffle high end
    osc.connect(filter).connect(gain).connect(audioCtx.destination);
    osc.start();
    gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.08);
    osc.stop(audioCtx.currentTime + 0.1);
}

function playTypingTick() {
    ensureAudio();
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.type = "sine";
    osc.frequency.value = 620 + (Math.random() * 20 - 10); // tight variance for morse-like beeps
    gain.gain.value = 0.035;
    osc.connect(gain).connect(audioCtx.destination);
    osc.start();
    gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.07);
    osc.stop(audioCtx.currentTime + 0.08);
}

// Fade in silhouette, then questions
window.addEventListener("load", () => {
    setTimeout(() => {
        silhouette.style.opacity = 0.55;
        setTimeout(() => {
            questionsBox.style.opacity = 1;
        }, 400);
    }, 200);
});

function typeAnswer(text) {
    ensureAudio();
    if (typingInterval) {
        clearInterval(typingInterval);
        typingInterval = null;
    }
    if (typingSoundInterval) {
        clearInterval(typingSoundInterval);
        typingSoundInterval = null;
    }
    answerBox.innerHTML = "";
    const textSpan = document.createElement("span");
    const caretSpan = document.createElement("span");
    caretSpan.className = "caret";
    caretSpan.textContent = "|";
    answerBox.appendChild(textSpan);
    answerBox.appendChild(caretSpan);

    let i = 0;
    typingSoundInterval = setInterval(() => {
        playTypingTick();
    }, 90);
    typingInterval = setInterval(() => {
        textSpan.textContent = text.slice(0, i);
        i++;
        if (i > text.length) {
            clearInterval(typingInterval);
            typingInterval = null;
            if (typingSoundInterval) {
                clearInterval(typingSoundInterval);
                typingSoundInterval = null;
            }
        }
    }, 30);
}

questions.forEach(q => {
    q.addEventListener("click", () => {
        playClickSound();
        questions.forEach(el => el.classList.remove("dimmed"));
        const answer = q.dataset.answer;
        setTimeout(() => typeAnswer(answer), 400);
        q.classList.add("used");
        q.classList.add("dimmed");
        usedCount++;

        if (usedCount === questions.length) {
            setTimeout(() => {
                setTimeout(() => {
                    questionsBox.style.opacity = 0;
                    answerBox.style.opacity = 0;
                    setTimeout(() => {
                        silhouette.classList.add("active");
                        silhouette.style.opacity = 1;
                        silhouette.addEventListener("click", nextPage, { once: true });
                    }, 500);
                }, 1000);
            }, 1000);
        }
    });
});

function nextPage() {
    window.location.href = "page12.html";
}
</script>

</body>
</html>
